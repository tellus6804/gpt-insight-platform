export const MBTI_PROFILES = {
  ISTJ: {
    label: "í˜„ì‹¤ì£¼ì˜ìí˜•",
    icon: "ğŸ› ï¸",
    color: "#4B6584",
    description: "ì²´ê³„ì ì´ê³  ì±…ì„ê°ì´ ê°•í•œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì„ í˜¸í•©ë‹ˆë‹¤. ì‹¤ìš©ì„±ê³¼ ì‚¬ì‹¤ ê¸°ë°˜ì˜ ì§ˆë¬¸ì„ ìì£¼ í•©ë‹ˆë‹¤.",
    tip: "êµ¬ì²´ì ì¸ ì‚¬ì‹¤ê³¼ ë§¥ë½ì„ ì œì‹œí•˜ë©´ GPTê°€ ë” ì˜ ì´í•´í•  ìˆ˜ ìˆì–´ìš”."
  },
  ISFJ: {
    label: "ìˆ˜í˜¸ìí˜•",
    icon: "ğŸ’š",
    color: "#50E3C2",
    description: "ì„¬ì„¸í•˜ê³  ì±…ì„ê° ìˆëŠ” ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì„ í˜¸í•˜ë©°, ìƒëŒ€ë°©ì˜ ì…ì¥ì„ ê³ ë ¤í•œ ì§ˆë¬¸ì„ ìì£¼ í•©ë‹ˆë‹¤.",
    tip: "ì§ˆë¬¸ì— ëª©ì ì„ ê°„ê²°íˆ í¬í•¨í•˜ê³ , ì˜ë„ë¥¼ ëª…í™•íˆ ì „ë‹¬í•˜ë©´ GPTê°€ ë” ì˜ ë°˜ì‘í•©ë‹ˆë‹¤."
  },
  INFJ: {
    label: "ì˜¹í˜¸ìí˜•",
    icon: "ğŸŒŒ",
    color: "#9B59B6",
    description: "í†µì°°ë ¥ ìˆê³  ëª©í‘œ ì§€í–¥ì ì¸ ì§ˆë¬¸ì„ ì„ í˜¸í•˜ë©°, ì˜ë¯¸ì™€ ëª©ì ì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê¹ë‹ˆë‹¤.",
    tip: "ì§ˆë¬¸ì— ì˜ë„ì™€ ë°°ê²½ì„ ë‹´ì•„ ì „ë‹¬í•˜ë©´ AIê°€ ë” ê¹Šì´ ìˆê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
  },
  INTJ: {
    label: "ì „ëµê°€í˜•",
    icon: "â™Ÿï¸",
    color: "#0A0A0A",
    description: "ì²´ê³„ì ì´ê³  ì „ëµì ì¸ ì§ˆë¬¸ì„ í†µí•´ ë¬¸ì œë¥¼ ë¶„ì„í•˜ê³  ë³¸ì§ˆì„ íŒŒì•…í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.",
    tip: "ë°°ê²½ ì„¤ëª…ê³¼ ë§¥ë½ì„ í•¨ê»˜ ì œê³µí•˜ë©´ AIê°€ ì „ëµì„ ë” ì˜ ì´í•´í•©ë‹ˆë‹¤."
  },
  ISTP: {
    label: "ì¥ì¸í˜•",
    icon: "ğŸ§°",
    color: "#3B3B98",
    description: "ë…¼ë¦¬ì ì´ê³  ìœ ì—°í•œ ì†Œí†µì„ ì„ í˜¸í•©ë‹ˆë‹¤. ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì§ˆë¬¸ì„ ì„ í˜¸í•˜ê³  ê°„ê²°í•˜ê²Œ í‘œí˜„í•©ë‹ˆë‹¤.",
    tip: "ì§ˆë¬¸ì„ ëª…í™•í•˜ê³  ê°„ê²°í•˜ê²Œ êµ¬ì„±í•˜ë©´ AIê°€ ë” ë¹ ë¥´ê²Œ ë°˜ì‘í•  ìˆ˜ ìˆì–´ìš”."
  },
  ISFP: {
    label: "ëª¨í—˜ê°€í˜•",
    icon: "ğŸ¨",
    color: "#F48FB1",
    description: "ê°ì„±ì ì´ê³  ìœ ì—°í•œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì„ í˜¸í•˜ëŠ” ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤. ì§ì ‘ì ì¸ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì¡°ìš©í•˜ì§€ë§Œ ê°•í•œ í‘œí˜„ì„ í•©ë‹ˆë‹¤.",
    tip: "ëŠë‚Œ ìœ„ì£¼ì˜ ì§ˆë¬¸ë„ ì¢‹ì§€ë§Œ, í•µì‹¬ ëª©ì ì´ë‚˜ ë§¥ë½ì„ ëª…í™•íˆ í•´ì£¼ë©´ GPTê°€ ë” ì˜ ë°˜ì‘í•©ë‹ˆë‹¤."
  },
  INFP: {
    label: "ì¤‘ì¬ìí˜•",
    icon: "ğŸ¨",
    color: "#B37DFF",
    description: "ê°ì„±ê³¼ ì§ê´€ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ í‘œí˜„ì„ êµ¬ì„±í•˜ëŠ” ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤. ì–¸ì–´ì— ê°ì •ì„ ë‹´ëŠ” ê²ƒì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•©ë‹ˆë‹¤.",
    tip: "êµ¬ì²´ì ì¸ ì‚¬ë¡€ë‚˜ ë…¼ë¦¬ë¥¼ ë³´ê°•í•˜ë©´ AI ì´í•´ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤. ë„ˆë¬´ ì‹œì ìœ¼ë¡œ ì“°ë©´ ì˜¤í•´í•  ìˆ˜ë„ ìˆì–´ìš”."
  },
  INTP: {
    label: "ë…¼ë¦¬ìˆ ì‚¬í˜•",
    icon: "ğŸ§ ",
    color: "#B8E986",
    description: "ë…¼ë¦¬ì ì´ê³  ë¶„ì„ì ì¸ ì ‘ê·¼ì„ ì„ í˜¸í•˜ë©°, ê°œë…ì ì´ê³  êµ¬ì¡°í™”ëœ ì§ˆë¬¸ì„ ìì£¼ í•©ë‹ˆë‹¤.",
    tip: "ë…¼ë¦¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì§ˆë¬¸í•˜ë˜, êµ¬ì²´ì ì¸ ì˜ˆì‹œë¥¼ í¬í•¨í•˜ë©´ AIê°€ ë” ì‰½ê²Œ ë§¥ë½ì„ ì´í•´í•  ìˆ˜ ìˆì–´ìš”."
  },
  ESTP: {
    label: "ëª¨í—˜ê°€í˜•",
    icon: "ğŸï¸",
    color: "#FF6B6B",
    description: "ì¦‰í¥ì ì´ê³  ë¬¸ì œ í•´ê²° ì¤‘ì‹¬ì˜ ëŒ€í™”ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤. ì‹¤ìš©ì„±ê³¼ ì§ì ‘ì ì¸ í‘œí˜„ì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•©ë‹ˆë‹¤.",
    tip: "ì§ì ‘ì ì¸ í‘œí˜„ê³¼ ë¬¸ì œ ì¤‘ì‹¬ ì§ˆë¬¸ì€ AIì˜ ì •í™•í•œ ë°˜ì‘ì„ ì´ëŒì–´ëƒ…ë‹ˆë‹¤."
  },
  ESFP: {
    label: "ì—°ì˜ˆì¸í˜•",
    icon: "ğŸ¤",
    color: "#F8A5C2",
    description: "ì—ë„ˆì§€ ë„˜ì¹˜ê³  ê²½í—˜ ì¤‘ì‹¬ì˜ ì§ˆë¬¸ì„ ì¢‹ì•„í•©ë‹ˆë‹¤. í˜„ì‹¤ì ì´ê³  ì‚¬ëŒ ì¤‘ì‹¬ì ì¸ í‘œí˜„ì„ ìì£¼ í•©ë‹ˆë‹¤.",
    tip: "í¥ë¯¸ë¡œìš´ ì‚¬ë¡€ë‚˜ ìƒìƒí•œ í‘œí˜„ì„ ê³ë“¤ì—¬ ì§ˆë¬¸í•˜ë©´ GPTê°€ ë§¥ë½ì„ ë” ì˜ íŒŒì•…í•  ìˆ˜ ìˆì–´ìš”."
  },
  ENFP: {
    label: "í™œë™ê°€í˜•",
    icon: "ğŸ’¡",
    color: "#F5A623",
    description: "ì•„ì´ë””ì–´ê°€ ë„˜ì¹˜ê³  í™œê¸°ì°¬ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì¦ê¸°ëŠ” í™œë™ê°€í˜•ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œë„ë‚˜ ì°½ì˜ì ì¸ ì ‘ê·¼ì„ ì„ í˜¸í•©ë‹ˆë‹¤.",
    tip: "í•µì‹¬ ìš”ì ì„ ì •ë¦¬í•´ì£¼ëŠ” ìŠµê´€ì„ ê¸¸ëŸ¬ë³´ì„¸ìš”. GPTê°€ íë¦„ì„ ë” ì˜ ë”°ë¼ê°ˆ ìˆ˜ ìˆì–´ìš”."
  },
  ENTP: {
    label: "ë³€ë¡ ê°€í˜•",
    icon: "ğŸ§©",
    color: "#00B894",
    description: "í˜¸ê¸°ì‹¬ ë§ê³  ë„ì „ì ì¸ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì„ í˜¸í•©ë‹ˆë‹¤. ë‹¤ì–‘í•œ ê´€ì ê³¼ ê°€ëŠ¥ì„±ì„ íƒìƒ‰í•©ë‹ˆë‹¤.",
    tip: "ì—¬ëŸ¬ ê°€ëŠ¥ì„±ì„ ì œì‹œí•˜ëŠ” ì§ˆë¬¸ì€ GPTì˜ ì°½ì˜ì  ì‚¬ê³ ë¥¼ ìê·¹í•  ìˆ˜ ìˆì–´ìš”."
  },
  ESTJ: {
    label: "ê²½ì˜ìí˜•",
    icon: "ğŸ“Š",
    color: "#1E90FF",
    description: "ëª…í™•í•œ ëª©í‘œì™€ ì‹¤í–‰ ì¤‘ì‹¬ ëŒ€í™”ë¥¼ ì„ í˜¸í•˜ëŠ” ê²½ì˜ìí˜•ì…ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ì •ë³´ë³´ë‹¤ëŠ” ì‹¤ì§ˆì ì¸ ê²°ê³¼ë¥¼ ì¤‘ìš”ì‹œí•©ë‹ˆë‹¤.",
    tip: "â€˜í•µì‹¬ë§Œ ì •ë¦¬í•´ì¤˜â€™, â€˜ì‹¤í–‰ ë‹¨ê³„ë¡œ ì•Œë ¤ì¤˜â€™ì²˜ëŸ¼ ìš”êµ¬ì‚¬í•­ì„ ëª…í™•íˆ ì œì‹œí•´ë³´ì„¸ìš”. GPTê°€ ë°”ë¡œ í•µì‹¬ì„ íŒŒì•…í•©ë‹ˆë‹¤."
  },
  ESFJ: {
    label: "ì‚¬êµì  ìˆ˜í˜¸ìí˜•",
    icon: "ğŸŒ¸",
    color: "#7ED321",
    description: "ìƒëŒ€ë°©ì„ ë°°ë ¤í•˜ê³  ì¡°í™”ë¥¼ ì¤‘ì‹œí•˜ëŠ” ì†Œí†µì„ ì„ í˜¸í•©ë‹ˆë‹¤. ê°ì •ê³¼ ì‹¤ìš©ì˜ ê· í˜•ì„ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤.",
    tip: "ë°°ë ¤ ì¤‘ì‹¬ì˜ ì§ˆë¬¸ë„ ì¢‹ì§€ë§Œ, êµ¬ì²´ì  ìš”êµ¬ì‚¬í•­ì„ í•¨ê»˜ í‘œí˜„í•˜ë©´ AIê°€ ë” ëª…í™•í•˜ê²Œ ì‘ë‹µí•  ìˆ˜ ìˆì–´ìš”."
  },
  ENFJ: {
    label: "ì„ ë„ìí˜•",
    icon: "ğŸ—£ï¸",
    color: "#E91E63",
    description: "ê°ì •ê³¼ ì¡°ì§ë ¥ì´ ê²°í•©ëœ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì„ í˜¸í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ì‚¬ëŒê³¼ì˜ ìƒí˜¸ì‘ìš©ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.",
    tip: "ì§ˆë¬¸ì— ëª©ì ê³¼ ì˜í–¥ë ¥ì„ í¬í•¨ì‹œí‚¤ë©´ GPTê°€ ë” ì ì ˆí•œ ëŒ€ì‘ì„ í•  ìˆ˜ ìˆì–´ìš”."
  },
  ENTJ: {
    label: "ì§€ë„ìí˜•",
    icon: "ğŸ“ˆ",
    color: "#D0021B",
    description: "ëª©í‘œ ì§€í–¥ì ì´ê³  ì¶”ì§„ë ¥ ìˆëŠ” ì§ˆë¬¸ìœ¼ë¡œ ëŒ€í™”ë¥¼ ì£¼ë„í•©ë‹ˆë‹¤. íš¨ìœ¨ì„±ê³¼ ì„±ê³¼ ì¤‘ì‹¬ì˜ ì‚¬ê³ ë°©ì‹ì„ ì„ í˜¸í•©ë‹ˆë‹¤.",
    tip: "ëª©ì ê³¼ ë°©í–¥ì„ ëª…í™•íˆ í•˜ë˜, ìƒëŒ€ë°© ì˜ê²¬ë„ ìœ ë„í•˜ëŠ” í‘œí˜„ì„ ê³ë“¤ì—¬ ë³´ì„¸ìš”. GPTê°€ ë” ì •êµí•˜ê²Œ ë°˜ì‘í•©ë‹ˆë‹¤."
  }
};

export function analyzeUserCommunicationStyle(inputText) {
  if (!inputText || inputText.trim().length === 0) {
    return null;
  }

  const hasFeelWords = /(ëŠë‚Œ|ê°ì •|ìƒê°|ë§ˆìŒ)/.test(inputText);
  const hasLogicWords = /(ê·¼ê±°|ë…¼ë¦¬|ì‚¬ë¡€|ì •ë¦¬|ë‹¨ê³„)/.test(inputText);
  const hasActionWords = /(ì‹¤í–‰|ì²˜ë¦¬|ê³„íš|ëª©í‘œ|ê²°ê³¼)/.test(inputText);
  const hasSocialWords = /(ê³µê°|ì˜ì‚¬ì†Œí†µ|ë°°ë ¤|ì¡´ì¤‘|ìƒí˜¸)/.test(inputText);

  let score = { EI: 0, SN: 0, TF: 0, JP: 0 };

  if (hasSocialWords) score.EI -= 10; else score.EI += 10;
  if (hasFeelWords) score.SN += 10; else score.SN -= 10;
  if (hasLogicWords) score.TF -= 10; else score.TF += 10;
  if (hasActionWords) score.JP += 10; else score.JP -= 10;

  const mbti =
    (score.EI >= 0 ? "I" : "E") +
    (score.SN >= 0 ? "N" : "S") +
    (score.TF >= 0 ? "F" : "T") +
    (score.JP >= 0 ? "P" : "J");

  const profile = MBTI_PROFILES[mbti] || {
    label: "ë¶„ì„ì¤‘í˜•",
    icon: "â”",
    color: "#666",
    description: "ëª…í™•í•œ ë¶„ì„ì„ ìœ„í•´ ë” ë§ì€ ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    tip: "ì§ˆë¬¸ì„ êµ¬ì²´ì ìœ¼ë¡œ êµ¬ì„±í•˜ë©´ GPTê°€ ë” ì •í™•í•˜ê²Œ ì§„ë‹¨í•  ìˆ˜ ìˆì–´ìš”."
  };

  return {
    type: mbti,
    icon: profile.icon,
    label: profile.label,
    color: profile.color,
    description: profile.description,
    tip: profile.tip
  };
}
// ğŸ” ì‚¬ìš©ì ë°œí™”ë§Œ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜
export function extractUserSpeechOnly(text) {
  if (!text) return "";
  return text
    .split(/\n+/)
    .filter(line =>
      /^ì‚¬ìš©ì\s*:/.test(line) || /^[You|User]\s*:/.test(line)
    )
    .map(line => line.replace(/^ì‚¬ìš©ì\s*:|^User\s*:|^You\s*:/, "").trim())
    .join(" ");
}
